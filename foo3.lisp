(clock)
(system-start bap:legacy-main)
(call (entry-foo))
(call (foo 0x40 0x80 0xC0 0x100 0x140 0xC8))
(clock)
(machine-fork (0 1))
(clock)
(machine-switch (1 0))
(clock)
(machine-fork (0 2))
(clock)
(machine-switch (2 0))
(clock)
(machine-fork (0 3))
(clock)
(machine-switch (3 0))
(clock)
(machine-fork (0 4))
(clock)
(machine-switch (4 0))
(clock)
(machine-fork (0 5))
(machine-switch (5 0))
(call (free 0x40))
(clock)
(flow (0 foo-p free-ptr))
(clock)
(call-return (free 0x40 0))
(clock)
(machine-fork (0 6))
(machine-switch (6 0))
(call (free 0x140))
(clock)
(flow (0 foo-v free-ptr))
(clock)
(call-return (free 0x140 0))
(clock)
(call-return (foo 0x40 0x80 0xC0 0x100 0x140 0xC8 1))
(clock)
(call-return (entry-foo 1))
(machine-switch (0 6))
(machine-kill 6)
(machine-switch (6 5))
(machine-kill 5)
(machine-switch (5 4))
(clock)
(machine-fork (4 7))
(machine-switch (7 4))
(call (malloc 0x64))
(clock)
(call-return (malloc 0x64 0x4000BC))
(clock)
(call (free 0x140))
(clock)
(flow (4 foo-v free-ptr))
(clock)
(call-return (free 0x140 0))
(clock)
(call-return (foo 0x40 0x80 0xC0 0x100 0x140 0xC8 1))
(clock)
(flow (4 malloc-ret-1 foo-q-*))
(clock)
(call-return (entry-foo 1))
(machine-kill 4)
(machine-switch (4 7))
(machine-kill 7)
(machine-switch (7 3))
(clock)
(machine-fork (3 8))
(clock)
(machine-switch (8 3))
(clock)
(machine-fork (3 9))
(machine-switch (9 3))
(call (free 0xC0))
(clock)
(flow (3 foo-x free-ptr))
(clock)
(call-return (free 0xC0 0))
(clock)
(call (free 0x140))
(clock)
(flow (3 foo-v free-ptr))
(clock)
(call-return (free 0x140 0))
(clock)
(call-return (foo 0x40 0x80 0xC0 0x100 0x140 0xC8 2))
(clock)
(call-return (entry-foo 2))
(machine-kill 3)
(machine-switch (3 9))
(machine-kill 9)
(machine-switch (9 8))
(clock)
(machine-fork (8 10))
(machine-switch (10 8))
(call (malloc 0xC8))
(clock)
(call-return (malloc 0xC8 0x4000BC))
(clock)
(call (free 0x140))
(clock)
(flow (8 foo-v free-ptr))
(clock)
(call-return (free 0x140 0))
(clock)
(call-return (foo 0x40 0x80 0xC0 0x100 0x140 0xC8 2))
(clock)
(flow (8 malloc-ret-1 foo-y-*))
(clock)
(call-return (entry-foo 2))
(machine-kill 8)
(machine-switch (8 10))
(machine-kill 10)
(machine-switch (10 2))
(call-return (foo 0x40 0x80 0xC0 0x100 0x140 0xC8 0xC8))
(clock)
(call-return (entry-foo 0xC8))
(machine-kill 2)
(machine-switch (2 1))
(call-return (foo 0x40 0x80 0xC0 0x100 0x140 0xC8 0xC8))
(clock)
(call-return (entry-foo 0xC8))
(machine-switch (1 0))
(system-stop bap:legacy-main)
